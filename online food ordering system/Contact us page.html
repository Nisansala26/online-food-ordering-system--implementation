<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ceylon Aroma - Contact Us</title>
    <link rel="stylesheet" href="contact_styles.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <header class="header">
        <div class="logo">
            <img src="images/logo.png" alt="Ceylon Aroma Logo"> 
        </div>
        <nav class="nav-links">
            <a href="#">Home</a>
            <a href="#">Menu</a>
            <a href="#">About</a>
            <a href="#" class="contact-link">Contact</a>
            <a href="#" class="login-btn">Login</a>
        </nav>
    </header>

    <div class="title-section">
        <h1>Contact Us</h1>
    </div>

    <div class="contact-content">
        <div class="get-in-touch">
            <h2>Get in Touch</h2>
            <form id="contactForm" class="contact-form">
                <input type="text" id="name" name="name" placeholder="Name" required>
                <input type="email" id="email" name="email" placeholder="Email" required>
                <input type="tel" id="phone" name="phone" placeholder="Phone number">
                <textarea id="message" name="message" placeholder="Message" required></textarea>
                <button type="submit" id="sendBtn" class="send-message-btn">Send Message</button>
            </form>
        </div>

        <div class="contact-info">
            <h2>Contact Info</h2>
            <div class="info-item">
                <i class="fas fa-map-marker-alt"></i>
                <span>123, Galle Road, Colombo, Sri Lanka</span>
            </div>
            <div class="info-item">
                <i class="fas fa-phone-alt"></i>
                <span>+94 77 123 1230</span>
            </div>
            <div class="info-item">
                <i class="fas fa-envelope"></i>
                <span>ceylonaroma@gmail.com</span>
            </div>
            <div class="map-container">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3765.2860719940886!2d79.86277367475637!3d6.856131393142292!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3ae25b0788705059%3A0xf594c628ac515c51!2s123%20Galle%20Rd%2C%20Colombo!5e1!3m2!1sen!2slk!4v1761575934504!5m2!1sen!2slk" 
                    width="100%" 
                    height="300" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div>Ceylon Aroma</div>
        <div class="social-icons">
            <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
            <a href="#" aria-label="X (Twitter)"><i class="fab fa-twitter"></i></a>
            <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const contactForm = document.getElementById('contactForm');
            const sendBtn = document.getElementById('sendBtn');
            
            // üö® Endpoint MUST match the backend server's address and port
            const BACKEND_URL = 'http://127.0.0.1:5000/submit_contact'; 

            contactForm.addEventListener('submit', async (e) => {
                e.preventDefault();

                sendBtn.textContent = 'Sending...';
                sendBtn.disabled = true;

                const data = {
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    message: document.getElementById('message').value
                };

                try {
                    const response = await fetch(BACKEND_URL, {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json' 
                        },
                        body: JSON.stringify(data)
                    });

                    const result = await response.json();

                    if (response.ok && result.status === 'success') {
                        alert('‚úÖ Success! Your message has been recorded.');
                        contactForm.reset(); 
                    } else {
                        alert('‚ùå Error sending message: ' + (result.message || 'An unknown server error occurred.'));
                    }
                } catch (error) {
                    console.error('Network Error:', error);
                    alert('‚ö†Ô∏è Could not connect to the server. Ensure the backend is running.');
                } finally {
                    sendBtn.textContent = 'Send Message';
                    sendBtn.disabled = false;
                }
            });
        });
    </script>
</body>
</html>
